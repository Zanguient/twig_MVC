/* http://docs.jquery.com/UI/Selectables
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
(function($){$.widget("ui.selectable",$.ui.mouse,{options:{appendTo:'body',autoRefresh:true,distance:0,filter:'*',tolerance:'touch',multiple:true},_create:function(){var c=this;this.element.addClass("ui-selectable");this.dragged=false;var d;this.refresh=function(){d=$(c.options.filter,c.element[0]);d.each(function(){var a=$(this);var b=a.offset();$.data(this,"selectable-item",{element:this,$element:a,left:b.left,top:b.top,right:b.left+a.outerWidth(),bottom:b.top+a.outerHeight(),startselected:false,selected:a.hasClass('ui-selected'),selecting:a.hasClass('ui-selecting'),unselecting:a.hasClass('ui-unselecting')})})};this.refresh();this.selectees=d.addClass("ui-selectee");this._mouseInit();this.helper=$(document.createElement('div')).css({border:'1px dotted black'}).addClass("ui-selectable-helper")},destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable");this._mouseDestroy();return this},_mouseStart:function(b){var c=this;this.opos=[b.pageX,b.pageY];if(this.options.disabled)return;var d=this.options;this.selectees=$(d.filter,this.element[0]);this._trigger("start",b);$(d.appendTo).append(this.helper);this.helper.css({"z-index":100,"position":"absolute","left":b.clientX,"top":b.clientY,"width":0,"height":0});if(d.autoRefresh){this.refresh()}this.selectees.filter('.ui-selected').each(function(){var a=$.data(this,"selectable-item");a.startselected=true;if(!b.metaKey){a.$element.removeClass('ui-selected');a.selected=false;a.$element.addClass('ui-unselecting');a.unselecting=true;c._trigger("unselecting",b,{unselecting:a.element})}});$(b.target).parents().andSelf().each(function(){var a=$.data(this,"selectable-item");if(a){a.$element.removeClass("ui-unselecting").addClass('ui-selecting');a.unselecting=false;a.selecting=true;a.selected=true;c._trigger("selecting",b,{selecting:a.element});return false}})},_mouseDrag:function(c){var d=this;this.dragged=true;if(this.options.disabled)return;if(!this.options.multiple)return;var e=this.options;var f=this.opos[0],y1=this.opos[1],x2=c.pageX,y2=c.pageY;if(f>x2){var g=x2;x2=f;f=g}if(y1>y2){var g=y2;y2=y1;y1=g}this.helper.css({left:f,top:y1,width:x2-f,height:y2-y1});this.selectees.each(function(){var a=$.data(this,"selectable-item");if(!a||a.element==d.element[0])return;var b=false;if(e.tolerance=='touch'){b=(!(a.left>x2||a.right<f||a.top>y2||a.bottom<y1))}else if(e.tolerance=='fit'){b=(a.left>f&&a.right<x2&&a.top>y1&&a.bottom<y2)}if(b){if(a.selected){a.$element.removeClass('ui-selected');a.selected=false}if(a.unselecting){a.$element.removeClass('ui-unselecting');a.unselecting=false}if(!a.selecting){a.$element.addClass('ui-selecting');a.selecting=true;d._trigger("selecting",c,{selecting:a.element})}}else{if(a.selecting){if(c.metaKey&&a.startselected){a.$element.removeClass('ui-selecting');a.selecting=false;a.$element.addClass('ui-selected');a.selected=true}else{a.$element.removeClass('ui-selecting');a.selecting=false;if(a.startselected){a.$element.addClass('ui-unselecting');a.unselecting=true}d._trigger("unselecting",c,{unselecting:a.element})}}if(a.selected){if(!c.metaKey&&!a.startselected){a.$element.removeClass('ui-selected');a.selected=false;a.$element.addClass('ui-unselecting');a.unselecting=true;d._trigger("unselecting",c,{unselecting:a.element})}}}});return false},_mouseStop:function(b){var c=this;this.dragged=false;var d=this.options;if(!this.options.multiple){$('.ui-selected',this.element[0]).each(function(){var a=$.data(this,"selectable-item");a.$element.removeClass('ui-selected')})}$('.ui-unselecting',this.element[0]).each(function(){var a=$.data(this,"selectable-item");a.$element.removeClass('ui-unselecting');a.unselecting=false;a.startselected=false;c._trigger("unselected",b,{unselected:a.element})});$('.ui-selecting',this.element[0]).each(function(){var a=$.data(this,"selectable-item");a.$element.removeClass('ui-selecting').addClass('ui-selected');a.selecting=false;a.selected=true;a.startselected=true;c._trigger("selected",b,{selected:a.element})});this._trigger("stop",b);this.helper.remove();return false}});$.extend($.ui.selectable,{version:"@VERSION"})})(jQuery);
